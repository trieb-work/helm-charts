global:
  # -- Global image pull secrets
  imagePullSecrets: []
  # -- Storage class to use for persistent volumes
  storageClass: ""
  # -- External Database URL (if not using internal PostgreSQL)
  databaseUrl: ""
  # -- External Redis URL (if not using internal Redis)
  redisUrl: ""
  # Database configuration
  database:
    # -- External primary database URL
    primaryUrl: ""
    # -- External read replica URLs
    replicaUrls: []
    # -- Maximum number of database connections
    maxConnections: 150
    # -- Connection timeout in seconds
    connectionTimeout: 5

# -- Service Mesh Configuration
serviceMesh:
  enabled: false
  # -- Istio specific configuration
  istio:
    enabled: false
    api:
      # -- Circuit breaking settings
      circuitBreaker:
        enabled: false
        maxConnections: 100
      # -- Request timeout settings
      timeout:
        enabled: false
        http: 10s

# -- Common labels for all resources
commonLabels: {}

# -- Common annotations for all resources
commonAnnotations: {}

api:
  enabled: true
  replicaCount: 1

  image:
    repository: ghcr.io/saleor/saleor
    tag: "3.19.12"
    pullPolicy: IfNotPresent

  extraEnv:
    - name: ALLOWED_HOSTS
      value: "*"
    - name: DATABASE_URL
      valueFrom:
        secretKeyRef:
          name: postgresql-credentials  # Will be templated in deployment
          key: database-url

  service:
    type: ClusterIP
    port: 8000

  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1
      memory: 1Gi

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80

dashboard:
  enabled: true
  replicaCount: 1
  
  image:
    repository: ghcr.io/saleor/saleor-dashboard
    tag: "3.19.12"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 80
  
  resources:
    requests:
      cpu: 250m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
  
  securityContext:
    runAsUser: 0
    runAsGroup: 0
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80

worker:
  enabled: true
  replicaCount: 1
  
  image:
    repository: ghcr.io/saleor/saleor
    tag: "3.19.12"
    pullPolicy: IfNotPresent
  
  extraEnv:

  
  resources:
    requests:
      cpu: 250m
      memory: 1024Mi
    limits:
      cpu: 500m
  
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80

postgresql:
  enabled: true
  architecture: standalone
  auth:
    username: saleor
    database: saleor
    password:
    postgresPassword:
    replicationPassword:
    existingSecret: postgresql-credentials  # Will be templated in deployment
    secretKeys:
      adminPasswordKey: postgresql-password
      userPasswordKey: user-password
      replicationPasswordKey: replication-password

  primary:
    persistence:
      size: 8Gi
    resources:
      requests:
        cpu: 100m
        memory: 256Mi

  readReplicas:
    replicaCount: 1
    persistence:
      size: 8Gi
    resources:
      requests:
        cpu: 100m
        memory: 256Mi

redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: true
  master:
    persistence:
      size: 8Gi
    resources:
      requests:
        cpu: 100m
        memory: 128Mi

ingress:
  enabled: false
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /$2
  api:
    enabled: true
    tls: []
    hosts:
      - host: chart-example.local
        paths:
          - path: /graphql(/|$)(.*)
            pathType: ImplementationSpecific
  dashboard:
    enabled: true
    tls: []
    hosts:
      - host: chart-example.local
        paths:
          - path: /dashboard(/|$)(.*)
            pathType: ImplementationSpecific

# Optional image pull secrets
imageCredentials:
  enabled: false
  registry: ""
  username: ""
  password: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podSecurityContext: {}

securityContext: {}

nodeSelector: {}

tolerations: []

affinity: {}